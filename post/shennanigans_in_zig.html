<!doctype html>
<html lang="en"><meta charset=utf-8>
<title>Zig shennanigans.</title>
<style>
    #contents {
      max-width: 60em;
      margin: auto;
      padding: 0 1em;
    }
    code {
      background: #f8f8f8;
      border: 1px dotted silver;
      padding-left: 0.3em;
      padding-right: 0.3em;
    }
    pre > code {
      display: block;
      overflow: auto;
      padding: 0.5em;
      border: 1px solid #eee;
      line-height: normal;
    }
    .tok-kw {
        color: #333;
        font-weight: bold;
    }
    .tok-str {
        color: #d14;
    }
    .tok-builtin {
        color: #005C7A;
    }
    .tok-comment {
        color: #545454;
        font-style: italic;
    }
    .tok-fn {
        color: #900;
        font-weight: bold;
    }
    .tok-null {
        color: #005C5C;
    }
    .tok-number {
        color: #005C5C;
    }
    .tok-type {
        color: #458;
        font-weight: bold;
    }
    <!-- figure -->
    figure {
      margin: auto 0;
    }
    figure pre {
      margin-top: 0;
    }

    figcaption {
      padding-left: 0.5em;
      font-size: small;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
    }
    figcaption.zig-cap {
      background: #fcdba5;
    }
    figcaption.c-cap {
      background: #a8b9cc;
      color: #000;
    }
    figcaption.peg-cap {
      background: #fcdba5;
    }
    figcaption.javascript-cap {
      background: #365d95;
      color: #fff;
    }
    figcaption.shell-cap {
      background: #ccc;
      color: #000;
    }

</style>
<div id="contents">
<div style="text-align:left; padding down up: 1em">
<h2>Zig shennanigans.</h2>
</div>
  As of 20240404 (zig version 0.12.0-dev.3562+96bc8f17c), Zig provides
  one of the best possible semantics to optimize memory details, while
  offering widely portable source code with reasonable safety in a
  relative concise and readable way.<p>
  Aside of signaling for toolings, I found personally no major annoying
  parts.<br>
  For example, picking up nested slices and some build system parts might be
  inconvenient, but those are one time things and no footguns.<br>
  The rest of the language feels very smooth to me in contrast to the potential
  very flexible and cryptic syntax of C (see <a href="https://github.com/JadLevesque/PPMP-Iceberg">preprocessor iceberg</a>).
  <ul>
    <li>
      Bottlenecks of array assignments not obvious via <code>@memcpy</code>.<br>
      <figure><figcaption class="zig-cap"><cite class="file">perf_array_assignment.zig</cite></figcaption>
<pre><code><span class="line"><span class="tok-kw">test</span> <span class="tok-str">&quot;perf array assignment&quot;</span> {</span>
<span class="line">    <span class="tok-kw">const</span> x: <span class="tok-kw">u8</span> = <span class=tok-number>100</span>;</span>
<span class="line">    <span class="tok-kw">const</span> x: [<span class=tok-number>1_000_000</span>]<span class="tok-kw">u8</span> = .{x} ** <span class=tok-number>1_000_000</span>;</span>
<span class="line">    <span class="tok-kw">var</span> b: [<span class=tok-number>1_000_000</span>]<span class="tok-kw">u8</span> = <span class="tok-kw">undefined</span>;</span>
<span class="line">    <span class="tok-comment">// pile of code</span></span>
<span class="line"></span>
<span class="line">    b = a; <span class="tok-comment">// spot the performance issue</span></span>
<span class="line"></span>
<span class="line">    <span class="tok-comment">// pile of code</span></span>
<span class="line">}</span></code></pre>
      </figure>
    </li>

    <li> Signaling: Test runner allows no signaling to <code>qemu -g
        4242</code> (debugger mode). Qemu uses gdb server signaling, which means
      sending SIGKILL is necessary to kill the debugging server process.
    </li>
</div>
</html>